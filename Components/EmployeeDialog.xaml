<UserControl x:Class="TheScheduler.Components.EmployeeDialog"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:TheScheduler.Models"
             xmlns:sys="clr-namespace:System;assembly=mscorlib"
             xmlns:vm="clr-namespace:TheScheduler.ViewModels"
             xmlns:utils="clr-namespace:TheScheduler.Utils"
             KeyDown="UserControl_KeyDown"
             Focusable="True"
             xmlns:editors="clr-namespace:Syncfusion.Windows.Shared;assembly=Syncfusion.Shared.WPF"
             x:Name="Root">

    <UserControl.Resources>
        <ObjectDataProvider MethodName="GetValues" ObjectType="{x:Type sys:Enum}" x:Key="SexValuesProvider">
            <ObjectDataProvider.MethodParameters>
                <x:Type TypeName="local:Sex"/>
            </ObjectDataProvider.MethodParameters>
        </ObjectDataProvider>
    </UserControl.Resources>

    <Border Background="#333333"
        CornerRadius="15"
        BorderThickness="2"
        BorderBrush="#7B7B7B"
        Padding="0"
        Width="450"
        Height="620">
        <Grid Margin="10">
            <Grid.RowDefinitions>
                <RowDefinition Height="40"/>
                <RowDefinition Height="450"/>
                <RowDefinition Height="120"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="1*"/>
            </Grid.ColumnDefinitions>

            <TextBlock Text="{utils:Loc EmployeeDialog_Title}"
                       Grid.Row="0"
                       Foreground="White"
                       FontSize="24"
                       HorizontalAlignment="Center"
                       VerticalAlignment="Center"/>

            <Grid Margin="10" Grid.Row="1" HorizontalAlignment="Center" VerticalAlignment="Center">
                <Grid.RowDefinitions>
                    <RowDefinition Height="1*"/>
                    <RowDefinition Height="5"/>
                    <RowDefinition Height="1*"/>
                    <RowDefinition Height="5"/>
                    <RowDefinition Height="1*"/>
                    <RowDefinition Height="5"/>
                    <RowDefinition Height="1*"/>
                    <RowDefinition Height="5"/>
                    <RowDefinition Height="1*"/>
                    <RowDefinition Height="5"/>
                    <RowDefinition Height="1*"/>
                    <RowDefinition Height="5"/>
                    <RowDefinition Height="1*"/>
                    <RowDefinition Height="5"/>
                    <RowDefinition Height="1*"/>
                    <RowDefinition Height="5"/>
                    <RowDefinition Height="3*"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="130"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Name -->
                <TextBlock FontSize="18" Text="{utils:Loc EmployeeDialog_Name}" Foreground="White" Grid.Row="0" Grid.Column="0" VerticalAlignment="Center"/>
                <TextBox x:Name="NameF" Width="170" FontSize="18" Text="{Binding EditingEmployee.Name}" Grid.Row="0" Grid.Column="1"/>

                <!-- Sex -->
                <TextBlock FontSize="18" Text="{utils:Loc EmployeeDialog_Sex}" Foreground="White" Grid.Row="2" Grid.Column="0" VerticalAlignment="Center"/>
                <ComboBox FontSize="18" SelectedItem="{Binding EditingEmployee.Sex}" Grid.Row="2" Grid.Column="1"
                      ItemsSource="{Binding Source={StaticResource SexValuesProvider}}">
                    <ComboBox.ItemTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Converter={StaticResource EnumToLocalizedStringConverter}}"/>
                        </DataTemplate>
                    </ComboBox.ItemTemplate>
                </ComboBox>

                <!-- Position -->
                <TextBlock FontSize="18" Text="{utils:Loc EmployeeDialog_Position}" Foreground="White" Grid.Row="4" Grid.Column="0" VerticalAlignment="Center"/>
                <ComboBox FontSize="18" 
                      ItemsSource="{Binding Positions}"
                      DisplayMemberPath="Name"
                      SelectedValuePath="Name"
                      SelectedValue="{Binding EditingEmployee.Position}"
                      Grid.Row="4" Grid.Column="1"/>

                <!-- Phone -->
                <TextBlock FontSize="18" Text="{utils:Loc EmployeeDialog_Phone}" Foreground="White" Grid.Row="6" Grid.Column="0" VerticalAlignment="Center"/>
                <TextBox FontSize="18" Text="{Binding EditingEmployee.Phone}" Grid.Row="6" Grid.Column="1"/>

                <!-- BOD -->
                <TextBlock FontSize="18" Text="{utils:Loc EmployeeDialog_DOB}" Foreground="White" Grid.Row="8" Grid.Column="0" VerticalAlignment="Center"/>
                <DatePicker FontSize="18" SelectedDate="{Binding EditingEmployee.Bod, Converter={StaticResource DateTimeConverter}}" Grid.Row="8" Grid.Column="1"/>

                <!-- Hire Date -->
                <TextBlock FontSize="18" Text="{utils:Loc EmployeeDialog_HireDate}" Foreground="White" Grid.Row="10" Grid.Column="0" VerticalAlignment="Center"/>
                <DatePicker FontSize="18" SelectedDate="{Binding EditingEmployee.HireAt, Converter={StaticResource DateTimeConverter}}" Grid.Row="10" Grid.Column="1"/>

                <!-- Address -->
                <TextBlock FontSize="18" Text="{utils:Loc EmployeeDialog_Address}" Foreground="White" Grid.Row="12" Grid.Column="0" VerticalAlignment="Center"/>
                <TextBox FontSize="18" Text="{Binding EditingEmployee.Address}" Grid.Row="12" Grid.Column="1"/>

                <!-- Category -->
                <TextBlock FontSize="18" Text="{utils:Loc EmployeeDialog_Category}" Foreground="White" Grid.Row="14" Grid.Column="0" VerticalAlignment="Center"/>
                <editors:UpDown FontSize="18" MinValue="0" NumberDecimalDigits="0" MaxValue="10" Value="{Binding EditingEmployee.Category}" Grid.Row="14" Grid.Column="1"/>

                <!-- Note -->
                <TextBlock FontSize="18" Text="{utils:Loc EmployeeDialog_Note}" Foreground="White" Grid.Row="16" Grid.Column="0" VerticalAlignment="Top"/>
                <TextBox FontSize="18" Text="{Binding EditingEmployee.Note}" Grid.Row="16" Grid.Column="1" TextWrapping="Wrap"/>
            </Grid>

            <StackPanel Orientation="Horizontal" Grid.Row="2" HorizontalAlignment="Center" Margin="0,0,0,0">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>
                    <Button Grid.Column="0" FontSize="18" Content="{utils:Loc EmployeeDialog_RegisterButton}" Width="80" Margin="0,0,10,0" Command="{Binding Dialog_EmployeeUpsertCommand}" CommandParameter="{Binding EditingEmployee}"/>
                    <Button Grid.Column="1" FontSize="18" Content="{utils:Loc EmployeeDialog_CloseButton}" Width="80" Command="{Binding EditEmployeeDialog_CancelledCommand}"/>
                    <TextBlock Grid.Column="0" Grid.ColumnSpan="2" Grid.Row="1"
                       Foreground="OrangeRed"
                       FontWeight="Bold"
                       FontSize="16"
                       Text="{Binding ErrorMessageText}"
                       VerticalAlignment="Center"
                       Margin="20,10,0,0"
                       Visibility="{Binding VisibleError, Converter={StaticResource UniversalConverter}}"/>
                </Grid>
            </StackPanel>

        </Grid>
    </Border>
</UserControl>
